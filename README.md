# MQTT 环境监控
简要说明：基于 MQTT over WebSocket 的前端监控页面，用于实时展示温度、湿度、风速和光照等环境数据。

## 📚 开发日志


## V4.1.0 更新内容（2025-12-21）

**卡片与单位显示优化**:
- 🎨 大气压强与海拔卡片采用清新色调，风格与其他卡片区分
- 📏 大气压强与海拔单位独占一行，位置更美观，显示更清晰

**弹窗与AI助手修复**:
- 🛠️ 修复主页面AI按钮、弹窗显示异常问题，结构更健壮
- 🔒 修复部分弹窗HTML标签未闭合导致的显示问题

**性能与体验提升**:
- ⚡ 优化页面渲染与交互细节，提升整体流畅度


## V3.6.3 更新内容（2025-12-20）

**仓库与项目结构优化**:
- 🧹 彻底移除无用文件夹和配置，仓库结构更清晰

**AI配置与弹窗体验提升**:
- 🛡️ ToastAlert弹窗z-index提升，确保所有弹窗始终最上层
- 🧩 AI配置保存、API获取等操作全部统一为ToastAlert弹窗反馈
- ⏳ 获取API按钮等待期间新增loading遮罩，防止闪烁和误操作
- 🐞 修复AI配置弹窗按钮等待时内容闪烁、重复弹窗等问题


## V3.6.1 更新内容

**AI 弹窗重构**:
- 居中弹出、渐进缩放，聊天区滚动不再被遮挡
- 移动端高度优化，自适应内容高度，避免虚拟键盘挤压
- 样式精简 移除重复/冲突的 AI 样式
- 弹窗打开时锁定背景滚动，安全区内边距适配


### v3.5 - AI 集成与优化 (2025-12-19)
**AI 助手功能**：
- 🤖 集成火山方舟豆包 API 提供 AI 分析功能
- 🔗 MQTT 获取 API Key 机制
- 💬 对话历史管理（最多 20 条，防止内存溢出）
- 🎯 环境数据 AI 分析与建议
**安全性加固**：
- 🔒 API Key 使用密码输入框存储
- 🛡️ JSON.parse 错误处理
- 🚫 XSS 防护 - HTML 特殊字符转义
- 👤 ClientID 过滤实现多客户端隔离
**UI/UX 改进**：
- 🎨 模型选择移至 API Key 上方
- 🔘 "获取 API" 按键与模型选择并排
- ⚡ 事件监听优化，减少不必要的 DOM 操作
- 📍 定时器清理机制防止内存泄漏
